<div class="container my-4">
  <div class="row d-flex justify-content-center">
    <div class="col-10 col-md-8">
      <div class="dropdown">
        <button class="btn btn-secondary btn-sm dropdown-toggle btn-block" type="button" id="dropdownMenuButton"
          data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          Category
        </button>
        <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenuButton">
          <a class="dropdown-item" href="/records?Food">Food</a>
          <a class="dropdown-item" href="/records?House">House</a>
          <a class="dropdown-item" href="/records?Transport">Transport</a>
          <a class="dropdown-item" href="/records?Medical">Medical</a>
          <a class="dropdown-item" href="/records?Entertainment">Entertainment</a>
          <a class="dropdown-item" href="/records?Others">Others</a>
        </div>
      </div>
    </div>

    <div class="col-10 col-md-8 my-3">
      <h5 class="text-center">Total Expenses</h5>
      <h1 class="text-center text-red">$ {{total}}</h1>
      <p class="text-center">{{ noResult }}</p>
      <div class="list-group">
        {{#each records}}
        <div class="list-group-item list-group-item-action">
          <div class="d-flex w-100 justify-content-between">
            <h5 class="mb-1"><i class="{{this.icon}} pr-3"></i>{{this.name}}</h5>
            <span>{{this.merchant}}</span><span>$ {{this.amount}}</span>
          </div>

          <div class="d-flex w-100 justify-content-between">
            <span>{{this.date}}</span>
            <div class="d-flex">
              <a class="btn btn-sm rounded-circle" href="./records/{{this._id}}/edit"><i class="fas fa-pen"></i></a>
              <button type="button" class="btn btn-sm rounded-circle" data-toggle="modal" data-target="#basicModal"
                onclick="setIDtoModal('{{this._id}}')">
                <i class="fas fa-trash-alt"></i>
              </button>
            </div>
          </div>

        </div>
        {{/each}}
      </div>
    </div>

    <div class="col-10 col-md-8 d-flex justify-content-center">
      <a class="btn btn-sm btn-major" href="./records/new">New Expense</a>
    </div>

    <div class="modal fade" id="basicModal" tabindex="-1" role="dialog" aria-labelledby="basicModal" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="myModalLabel">Are you sure to delete this expense?</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            Once you confirm, this expense will be removed from the list.
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-minor" data-dismiss="modal">No</button>
            <form id="deleteRecord" method="POST">
              <button type="submit" class="btn btn-major">Yes</button>
            </form>
          </div>
        </div>
      </div>
    </div>

  </div>
</div>

<script type="text/javascript">
  function setIDtoModal(id) {
    document.getElementById("deleteRecord").action = `./records/${id}?_method=DELETE`
  }
</script>